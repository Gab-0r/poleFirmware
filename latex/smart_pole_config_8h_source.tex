\hypertarget{smart_pole_config_8h_source}{}\doxysection{smart\+Pole\+Config.\+h}
\mbox{\hyperlink{smart_pole_config_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/***************************************************/}}
\DoxyCodeLine{2 \textcolor{comment}{/*                   System pins                   */}}
\DoxyCodeLine{3 \textcolor{comment}{/***************************************************/}}
\DoxyCodeLine{4 \textcolor{preprocessor}{\#define PIR\_SENSOR\_PIN          (uint16\_t)15U}}
\DoxyCodeLine{5 \textcolor{preprocessor}{\#define LED\_CTRL\_PIN            (uint16\_t)7U}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#define GRID\_SUPPLY\_RELAY       (uint16\_t)22U}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#define BATTERY\_SUPPLY\_RELAY    (uint16\_t)21U}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#define SOLAR\_SUPPLY\_RELAY      (uint16\_t)20U}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#define MAGNETIC\_SWITCH\_PIN     (uint16\_t)16U}}
\DoxyCodeLine{10 }
\DoxyCodeLine{11 \textcolor{comment}{/***************************************************/}}
\DoxyCodeLine{12 \textcolor{comment}{/*                 System parameters               */}}
\DoxyCodeLine{13 \textcolor{comment}{/***************************************************/}}
\DoxyCodeLine{14 }
\DoxyCodeLine{15 \textcolor{comment}{/* Print debug messages */}}
\DoxyCodeLine{16 \textcolor{preprocessor}{\#define DEBUGLOG\_MODE   1}}
\DoxyCodeLine{17 \textcolor{comment}{/* Period to launch the next measurement stage in ms*/}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#define PERIOD\_TRIGGER\_TASK 10000UL}}
\DoxyCodeLine{19 \textcolor{comment}{/* Time in ms until the lamp decreases the bright after no detect movement */}}
\DoxyCodeLine{20 \textcolor{preprocessor}{\#define MAX\_BRIGHT\_TIME  (uint32\_t)10000U}}
\DoxyCodeLine{21 \textcolor{comment}{/* Duty cycle (0 -\/ 100) for max bright, i.e when movement is detected*/}}
\DoxyCodeLine{22 \textcolor{preprocessor}{\#define MAX\_BRIGHT\_DUTY 99U}}
\DoxyCodeLine{23 \textcolor{comment}{/* Duty cycle (0 -\/ 100) for min bright, i.e when is no movement*/}}
\DoxyCodeLine{24 \textcolor{preprocessor}{\#define MIN\_BRIGHT\_DUTY 20U}}
\DoxyCodeLine{25 \textcolor{comment}{/* Duty cycle (0 -\/ 100) for max bright, i.e when movement is detected and system is in power saving mode*/}}
\DoxyCodeLine{26 \textcolor{preprocessor}{\#define MAX\_BRIGHT\_ENERGY\_SAVING\_DUTY 60U}}
\DoxyCodeLine{27 \textcolor{comment}{/* Duty cycle (0 -\/ 100) for min bright, i.e when is no movement and system is in power saving mode*/}}
\DoxyCodeLine{28 \textcolor{preprocessor}{\#define MIN\_BRIGHT\_ENERGY\_SAVING\_DUTY 20U}}
\DoxyCodeLine{29 \textcolor{comment}{/* Duty cycle (0 -\/ 100) for max bright, i.e when movement is detected and system is in emergency mode*/}}
\DoxyCodeLine{30 \textcolor{preprocessor}{\#define MAX\_BRIGHT\_EMERGENCY\_DUTY 30U}}
\DoxyCodeLine{31 \textcolor{comment}{/* Duty cycle (0 -\/ 100) for min bright, i.e when is no movement* and system is in emergency mode */}}
\DoxyCodeLine{32 \textcolor{preprocessor}{\#define MIN\_BRIGHT\_EMERGENCY\_DUTY 30U}}
\DoxyCodeLine{33 \textcolor{comment}{/* PWM frequency that controls lamp brightness*/}}
\DoxyCodeLine{34 \textcolor{preprocessor}{\#define LAMP\_PWM\_FREQUENCY 30000U}}
\DoxyCodeLine{35 \textcolor{comment}{/* PWM wrap*/}}
\DoxyCodeLine{36 \textcolor{preprocessor}{\#define LAMP\_PWM\_WRAP 4167U}}
\DoxyCodeLine{37 \textcolor{comment}{/* Time in ms until the relay release the contact */}}
\DoxyCodeLine{38 \textcolor{preprocessor}{\#define RELAY\_RELEASE\_TIME  5000UL}}
\DoxyCodeLine{39 }
\DoxyCodeLine{40 }
\DoxyCodeLine{41 }
\DoxyCodeLine{42 \textcolor{comment}{/***************************************************/}}
\DoxyCodeLine{43 \textcolor{comment}{/*                    Enumerations                 */}}
\DoxyCodeLine{44 \textcolor{comment}{/***************************************************/}}
\DoxyCodeLine{45 }
\DoxyCodeLine{46 \textcolor{comment}{/* Operating modes */}}
\DoxyCodeLine{47 \textcolor{keyword}{enum} \mbox{\hyperlink{smart_pole_config_8h_a8e4ffa5726ab4bbfea34fa9f25a15e24}{OP\_MODE}}}
\DoxyCodeLine{48 \{}
\DoxyCodeLine{49     \mbox{\hyperlink{smart_pole_config_8h_a8e4ffa5726ab4bbfea34fa9f25a15e24a40a71b2d40ad7ef49b7e28e422ae351e}{NORMAL\_OPERATION}},}
\DoxyCodeLine{50     \mbox{\hyperlink{smart_pole_config_8h_a8e4ffa5726ab4bbfea34fa9f25a15e24aca6b876d281ae029d122953dd356b30f}{POWER\_SAVING}},}
\DoxyCodeLine{51     \mbox{\hyperlink{smart_pole_config_8h_a8e4ffa5726ab4bbfea34fa9f25a15e24af93f65583dbb61806be08c2ba787e74e}{EMERGENCY\_OPERATION}}}
\DoxyCodeLine{52 \};}
\DoxyCodeLine{53 }
\DoxyCodeLine{54 \textcolor{comment}{/* Sensors Events */}}
\DoxyCodeLine{55 \textcolor{keyword}{enum} \mbox{\hyperlink{smart_pole_config_8h_ad087131346f96891b869ccd5cdef31c9}{SENS\_EVENTS}}}
\DoxyCodeLine{56 \{}
\DoxyCodeLine{57     \mbox{\hyperlink{smart_pole_config_8h_ad087131346f96891b869ccd5cdef31c9a2488fc64c820d6e5040ae6839a6d8506}{MOVEMENT\_DETECTED}},}
\DoxyCodeLine{58     \mbox{\hyperlink{smart_pole_config_8h_ad087131346f96891b869ccd5cdef31c9a4d56177b6a2b746f93d162e92906a800}{NO\_MOVEMENT}}}
\DoxyCodeLine{59 \};}
\DoxyCodeLine{60 }
\DoxyCodeLine{61 \textcolor{comment}{/* System alerts */}}
\DoxyCodeLine{62 \textcolor{keyword}{enum} \mbox{\hyperlink{smart_pole_config_8h_a3939581878d7d30a4039375f57b9db42}{SYSTEM\_ALERTS}}\{}
\DoxyCodeLine{63     \mbox{\hyperlink{smart_pole_config_8h_a3939581878d7d30a4039375f57b9db42accb41df2b4b528a8b7027cd1a792a7a0}{NO\_ALERT}},}
\DoxyCodeLine{64     \mbox{\hyperlink{smart_pole_config_8h_a3939581878d7d30a4039375f57b9db42aa356f97f098e2c712a24e17891d9d784}{BOX\_OPEN}}}
\DoxyCodeLine{65 \};}
\DoxyCodeLine{66 }
\DoxyCodeLine{67 \textcolor{comment}{/* Light Manager status */}}
\DoxyCodeLine{68 \textcolor{keyword}{enum} \mbox{\hyperlink{smart_pole_config_8h_ab9a5caca1479c095b06f64eb0888e7b2}{LIGHT\_MANAGER\_STATUS}}\{}
\DoxyCodeLine{69     \mbox{\hyperlink{smart_pole_config_8h_ab9a5caca1479c095b06f64eb0888e7b2a038246f844762bb3b60f9f00f47eeadf}{EXPECTED}},}
\DoxyCodeLine{70     \mbox{\hyperlink{smart_pole_config_8h_ab9a5caca1479c095b06f64eb0888e7b2afb6b839a96a9da95547956098b7606ef}{UNEXPECTED}},}
\DoxyCodeLine{71     \mbox{\hyperlink{smart_pole_config_8h_ab9a5caca1479c095b06f64eb0888e7b2ab7ae5781b3d0707ad2da349a227db593}{NOT\_WORKING}}}
\DoxyCodeLine{72 \};}
\DoxyCodeLine{73 }
\DoxyCodeLine{74 \textcolor{comment}{/* Light Manager control actions */}}
\DoxyCodeLine{75 \textcolor{keyword}{enum} \mbox{\hyperlink{smart_pole_config_8h_a9d81c5c191e4f9a6469fbf48c6fd64af}{LIGHT\_MANAGER\_CONTROL\_ACTIONS}}\{}
\DoxyCodeLine{76     \mbox{\hyperlink{smart_pole_config_8h_a9d81c5c191e4f9a6469fbf48c6fd64afac92617ce0ef00418103c671a6f029927}{INCREASE\_BRIGHT}},}
\DoxyCodeLine{77     \mbox{\hyperlink{smart_pole_config_8h_a9d81c5c191e4f9a6469fbf48c6fd64afac5feee0d3961abf7c36d8e63c6d7abbd}{DECREASE\_BRIGHT}},}
\DoxyCodeLine{78     \mbox{\hyperlink{smart_pole_config_8h_a9d81c5c191e4f9a6469fbf48c6fd64afa03eb8be46d7469573f4ba5665b86c832}{OP\_MODE\_CHANGED}}}
\DoxyCodeLine{79 \}; }
\DoxyCodeLine{80 }
\DoxyCodeLine{81 \textcolor{comment}{/* Supply Manager status */}}
\DoxyCodeLine{82 \textcolor{keyword}{enum} \mbox{\hyperlink{smart_pole_config_8h_a6f65577807dbe65ddbecaa0f75eb5014}{SUPPLY\_MANAGER\_STATUS}}\{}
\DoxyCodeLine{83     \mbox{\hyperlink{smart_pole_config_8h_a6f65577807dbe65ddbecaa0f75eb5014a2bc49ec37d6a5715dd23e85f1ff5bb59}{OK}},}
\DoxyCodeLine{84     \mbox{\hyperlink{smart_pole_config_8h_a6f65577807dbe65ddbecaa0f75eb5014a04ef9c54bf8fecf6499edcc41b7281d7}{LOW\_POWER}},}
\DoxyCodeLine{85     \mbox{\hyperlink{smart_pole_config_8h_a6f65577807dbe65ddbecaa0f75eb5014a742fb575c19430d06efcb377876f47d9}{OVER\_VOLTAGE}},}
\DoxyCodeLine{86     \mbox{\hyperlink{smart_pole_config_8h_a6f65577807dbe65ddbecaa0f75eb5014a4548ab7d2aca8604c3e0e536957dfabc}{OVER\_CURRENT}},}
\DoxyCodeLine{87     \mbox{\hyperlink{smart_pole_config_8h_a6f65577807dbe65ddbecaa0f75eb5014a599b82e69547e6c61ae8b4e01b3c6494}{NO\_POWER}}}
\DoxyCodeLine{88 \};}
\DoxyCodeLine{89 }
\DoxyCodeLine{90 \textcolor{comment}{/* Supply Manager actions*/}}
\DoxyCodeLine{91 \textcolor{keyword}{enum} \mbox{\hyperlink{smart_pole_config_8h_af8dbd82867c2ec05a55c26f7af16e5bb}{POWER\_EVENTS}}\{}
\DoxyCodeLine{92     \mbox{\hyperlink{smart_pole_config_8h_af8dbd82867c2ec05a55c26f7af16e5bba3f0b65150069f932b7179189f87d32a3}{CLOSE\_RELAY}},}
\DoxyCodeLine{93     \mbox{\hyperlink{smart_pole_config_8h_af8dbd82867c2ec05a55c26f7af16e5bba472fe4b4a94050d20559b06021770ada}{RELEASE\_RELAY}},}
\DoxyCodeLine{94     \mbox{\hyperlink{smart_pole_config_8h_af8dbd82867c2ec05a55c26f7af16e5bba76c49c6e96f5e4489ee46d006ae7bbf8}{SUPPLY\_CHANGE}},}
\DoxyCodeLine{95     \mbox{\hyperlink{smart_pole_config_8h_af8dbd82867c2ec05a55c26f7af16e5bbad3de5e64f77780083269c418b5df71f3}{MAX\_CURRENT\_THRESHOLD\_CHANGED}},}
\DoxyCodeLine{96     \mbox{\hyperlink{smart_pole_config_8h_af8dbd82867c2ec05a55c26f7af16e5bba285c4c87b6c155cfa3360633adf78c18}{MIN\_CURRENT\_THRESHOLD\_CHANGED}},}
\DoxyCodeLine{97     \mbox{\hyperlink{smart_pole_config_8h_af8dbd82867c2ec05a55c26f7af16e5bba1a171f406b91a585bc3f168e1ac05500}{OP\_MDOE\_CHANGED}}}
\DoxyCodeLine{98 \};}
\DoxyCodeLine{99 }
\DoxyCodeLine{100 \textcolor{comment}{/***************************************************/}}
\DoxyCodeLine{101 \textcolor{comment}{/*                    STRUCTS                      */}}
\DoxyCodeLine{102 \textcolor{comment}{/***************************************************/}}
\DoxyCodeLine{103 }
\DoxyCodeLine{104 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\mbox{\hyperlink{structligh_data}{lighData}}}
\DoxyCodeLine{105 \{}
\DoxyCodeLine{106     uint16\_t \mbox{\hyperlink{structligh_data_a1bcfc20a542deae345b2fc3a617697e1}{lightLevels}}[2];}
\DoxyCodeLine{107     uint8\_t \mbox{\hyperlink{structligh_data_aba049fd085e222e40a5797d0374b7ebf}{currentBright}};}
\DoxyCodeLine{108     uint8\_t \mbox{\hyperlink{structligh_data_af11fccec3d5a0d34f0741ec115b677a8}{lastAction}};}
\DoxyCodeLine{109     uint8\_t \mbox{\hyperlink{structligh_data_ab8c2ba75a46a5493d3174a0676aeb009}{status}};}
\DoxyCodeLine{110 \}\mbox{\hyperlink{smart_pole_config_8h_a139a8299be42806ad4cb382330cd8d2a}{lightData}};}

\end{DoxyCode}
